define ("local_ace/activity_engagement",["exports","core/ajax","core/chart_builder","core/chart_output_chartjs","local_ace/chart_filters"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=f(b);c=f(c);d=f(d);function f(a){return a&&a.__esModule?a:{default:a}}var g=0,h=!1,i=null,j=null,k=null,l=function(a){if(0!==g){return}k=a.colouractivityengagement;g=a.cmid;(0,e.init)(p);p();document.querySelector("#show-cumulative").addEventListener("click",m);document.querySelector("#show-daily-access").addEventListener("click",n)};a.init=l;var m=function(){h=!0;p();document.querySelector("#show-cumulative").style.display="none";document.querySelector("#show-daily-access").style.display=null},n=function(){h=!1;p();document.querySelector("#show-cumulative").style.display=null;document.querySelector("#show-daily-access").style.display="none"},o=function(a){var b=document.querySelector("#chart-area-engagement"),c=b.querySelector(".chart-image");c.innerHTML=a},p=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:i,b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:j;if(i!==a){i=a}if(j!==b){j=b}var e=r(a,b).then(function(a){if(null!==a.error||0===a.series.length){o(a.error);return null}var b=q();b.series[0].values=a.series;b.labels=a.xlabels;b.axes.y[0].max=100;b.axes.y[0].stepSize=20;var c={};a.ylabels.forEach(function(a){c[a.value]=a.label});b.axes.y[0].labels=c;return b}).catch(function(){o("API Error")});e.then(function(a){if(null===a){return}var b=document.querySelector("#chart-area-engagement"),e=b.querySelector(".chart-image");e.innerHTML="";c.default.make(a).then(function(a){new d.default(e,a)}).catch()}).catch()},q=function(){return{type:"line",series:[{label:"Activity Engagement",labels:null,type:null,values:null,colors:[k],fill:null,axes:{x:null,y:null},urls:[],smooth:null}],labels:null,title:null,axes:{x:[],y:[{label:null,labels:{},max:null,min:0,position:null,stepSize:null}]},legend_options:{display:!1},config_colorset:null,smooth:!0}},r=function(a,c){return b.default.call([{methodname:"local_ace_get_activity_analytics_graph",args:{cmid:g,start:a,end:c,cumulative:h}}])[0]}});
//# sourceMappingURL=activity_engagement.min.js.map
